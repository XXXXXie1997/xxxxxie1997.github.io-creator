---
title: "浅析MVC"
date: 2020-07-01T11:32:40+08:00
draft: false
---

MVC 将代码分为 M（数据模型）V（视图）C（控制器）三类对象。

---

## M、V、C 三个对象分别做什么？

M：模型（model）用于封装与程序逻辑相关的数据以及对数据的处理方法，会有一个或多个视图（view）监听此模型。模块中的数据类代码可以放入 M 中。

```javascript
const m = {
  data: 巴拉巴拉,
  name: 乌拉,
};
```

V：视图（view）是程序在屏幕上的表示，是用户最直观看到的部分，显示的的是模型（model）的当前状态。

```javascript
const m = {
  html: `
    <section>
    <div class='x'>RUA</div>
    </section>
    `,
};
```

C：控制器（controller）定义用户界面对用户输入的响应方式，起到不同层面间的组织作用，用于控制程序的流程，它用于处理用户的行为和数据（model）的改变。

```javascript
const c = {
    method:{
        用户戳了哪里，做什么
         }
    }
```

用户操作界面时，通过 C 中的响应方式，使得 M 产生变化，V 应当产生响应的更新，显示出新的内容。

---

## EventBus 的作用是什么？有哪些 api？

将所有的对象看做一个一个的点，如果想要进行单个或多个点之间的通信，最好的方法是找出一个专门的点负责这些点之间的通信。

这个点就是 eventBus，它负责对象与对象（单个或多个）之间的通信。

使用 jquery 为例：声明的 eventBus 本身是一个空对象，但其中恰巧包含很多 api 例如 on、off、trigger 等，那么这个对象就可以作为其他对象间通信用的对象了。例如在模型中创建了一个方法，这个方法触发时 eventBus 就会~~大吼一声~~。

此时只要另一边监听 eventBus 这一声，再给出一定的响应，对象间的通信就完成了，~~唉就好比打了个电话~~。

---

## 什么是表驱动编程？

在写代码的过程中总会遇到“大批代码长得很像，但实际不重复”的情况。

此时，通过眯起眼睛分析这些代码中哪部分才是真正需要的数据，将这些重要数据做成一个哈希表，就可以有效的简化代码（这属于数据结构知识给程序猿的红利）。

---

## 对模块化的理解

有时候一个程序需要实现很多很多很多的功能，如果都写到一起，维护起来会非常不便，于是大家将每一个小功能的那部分代码分开写到很多文件中，再进行引用，就能大幅度降低维护和 debug 所消耗的时间和精力。模块化为最小知识原则奠定了基础，在模块化开发的过程中，所需要的知道的知识会越来越少。

---

## 最后是一些其他的记录

1. 所有的模块都可以使用 MVC 来搞定的话，干脆一上来就全这么写，这是一种以不变应万变的思路。不过可能会导致有很多多余的、用不到的代码。

2) 事不过三：如果同样的代码出现了三遍，就应该琢磨琢磨，将这个代码抽成一个函数，然后分别调用即可。如果同样的属性出现了三遍，那就应该把它做成共有属性（原型或者类）。同样的原型如果出现了三遍，就应该善用继承。（实际实现起来挺难的，有时候继承的层级太深，吃顿饭回来代码就看不懂了。。。）

3. `view=render(data)`：比起操作 dom 对象要先获取元素再监听 balbala 的，使用 render 可以便捷得多，只要 data 发生了改变，页面就会重新渲染展示新的 view。不过要注意因为每一次 render 都要重新渲染页面覆盖原内容，所以比起 dom 操作，性能的浪费是不可避免的。（通过虚拟 dom 可以解决这个问题）

4) 写 JS，总要做出选择，摆在面前的路有两条：第一条是每一句代码都要加分号，但每一句都加分号并不是每一行都加，会迷惑。。。第二条是都不加分号，但是任何一行都不能以括号开头，因为 JS 会向上一行合并，从而产生各种 bug，也会产生迷惑。所以迷惑于‘加不加分号’或者‘加不加括号’，这是难免的，选择吧。
